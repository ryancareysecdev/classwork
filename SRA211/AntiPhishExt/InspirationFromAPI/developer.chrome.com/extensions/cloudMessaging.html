





<!DOCTYPE html><html lang="en"
      class=""><head><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta charset="utf-8"><meta name="xsrf_token" content="JjUH1PEmVyIbQiJ_MWmLoKONjmRFGOzzSlTfCJOg8Ys6MTU1MzY2MzA0NDc1MTQyMw" /><link rel="canonical" href="cloudMessaging.html"><link rel="alternate" href="cloudMessaging.html" hreflang="en"><link rel="alternate" href="https://developers.google.cn/cloud-messaging/chrome/client" hreflang="en-cn"><link rel="alternate" href="cloudMessaging.html" hreflang="x-default"><link rel="shortcut icon" href="https://developers.google.com/_static/5b213a6cb2/images/favicon.png"><link rel="apple-touch-icon" href="https://developers.google.com/_static/5b213a6cb2/images/touch-icon.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet"
      
      href="https://fonts.googleapis.com/css?family=Google+Sans:400,500|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"
      ><link rel="stylesheet"
        href="https://developers.google.com/_static/5b213a6cb2/css/devsite-google-blue.css"><link rel="search"
        type="application/opensearchdescription+xml"
        title="Google Developers"
        href="https://developers.google.com/s/opensearch.xml"><script src="https://developers.google.com/_static/5b213a6cb2/js/jquery-bundle.js"></script><meta property="og:site_name" content="Google Developers"><meta property="og:type" content="website"><meta property="og:url" content="https://developers.google.com/cloud-messaging/chrome/client"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'en';
  </script><title>Implementing GCM Client on Chrome &nbsp;|&nbsp; Cloud Messaging
      &nbsp;|&nbsp; Google Developers</title><meta property="og:title" content="Implementing GCM Client on Chrome &nbsp;|&nbsp; Cloud Messaging
      &nbsp;|&nbsp; Google Developers"><meta property="og:image"
          content="https://developers.google.com/_static/5b213a6cb2/images/share/devsite-google-blue.png"><meta property="og:image:secure_url"
          content="https://developers.google.com/_static/5b213a6cb2/images/share/devsite-google-blue.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"></head><body class="
               devsite-doc-page
               
               
               
               devsite-header-no-upper-tabs
               "
        data-family="endorsed"
        
        
        
        id="top_of_page"><div class="devsite-wrapper"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent"><div class="devsite-top-logo-row-wrapper-wrapper"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event"
                  data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><a class="devsite-product-name-link gc-analytics-event"
       href="https://developers.google.com/cloud-messaging/"
       data-category="Site-Wide Custom Events"
       data-label="Project logo (header)"><img src="https://developers.google.com/cloud-messaging/images/gcm_logo.svg" class="devsite-product-logo"
               alt="Google Cloud Messaging -- DEPRECATED 4/10/2018"></a><span class="devsite-product-name"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item"><a href="https://developers.google.com/cloud-messaging/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Upper Header"
       data-value="1">
    
    
      
        Google Cloud Messaging -- DEPRECATED 4/10/2018
      
    
    
    </a></li></ul></span></div><div class="devsite-header-upper-tabs"></div><form class="devsite-search-form"
                action="https://developers.google.com/s/results/"
                method="GET"
                id="top-search"
                search-placeholder='Search'><div id="searchbox" class="devsite-searchbox"><input placeholder='Search'
         
         type="text"
         class="devsite-search-field devsite-search-query"
         name="q"
         value=""
         autocomplete="off"
         
         aria-label="Search box"
         ><div class="devsite-search-image material-icons"></div></div><input type="hidden"
       name="p"
       id="search_project"
       value="/cloud-messaging/"
       data-project-name="Cloud Messaging"
       data-project-path="/cloud-messaging/"
       data-query-match=""><input type="hidden" class="suggest-project" value="Cloud Messaging" /></form><a class="devsite-header-link devsite-top-button button gc-analytics-event"
               
               href="https://developers.google.com/products/"
               
               data-category="Site-Wide Custom Events"
               data-label="Site header link"
               track-type="globalNav"
               track-name="all products"
               track-metadata-position="nav"
               track-metadata-eventDetail='nav'><div class="devsite-header-link-label">All Products</div></a><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button><a href="https://accounts.google.com/ServiceLogin?passive=true&continue=https%3A%2F%2Fdevelopers.google.com%2Fcloud-messaging%2Fchrome%2Fclient%3Frefresh%3D1&service=ahsid"
   class="devsite-user-signin devsite-top-button button gc-analytics-event"
   data-category="Site-Wide Custom Events"
   data-label="Sign in button"
   track-type='globalNav'
   track-name='signIn'
   track-metadata-eventDetail='nav'
   track-metadata-position='nav'>
  
  Sign in
</a></div></div></div><div class="devsite-collapsible-section"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-doc-set-nav-row devsite-full-site-width"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll"><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.com/cloud-messaging/"
           class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
           
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Home"
         >
          Home
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.com/cloud-messaging/gcm"
           class="devsite-doc-set-nav-active devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
           aria-label="Guides, selected"
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Guides"
         >
          Guides
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.com/cloud-messaging/http-server-ref"
           class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
           
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Reference"
         >
          Reference
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.com/cloud-messaging/samples"
           class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
           
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Samples"
         >
          Samples
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.com/cloud-messaging/support"
           class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event"
           
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Support"
         >
          Support
        </a></li><button type="button" id="devsite-feedback-project"
          class="devsite-feedback-button devsite-top-button gc-analytics-event"
          data-category="Site-Wide Custom Events" data-label="Send Feedback Button"
          track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header">
  
  Send feedback
  </button></ul></nav></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('en')
        }
      });
    }
  </script></div><div id="gc-wrapper"itemscope itemtype="http://schema.org/Article"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;Cloud Messaging&quot;, &quot;dimension5&quot;: &quot;en&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-24532603-1&quot;}"><script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "US", "language": {"requested": "en", "served": "en"}, "projectName": "Cloud Messaging", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  


<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0">
  
  <div class="devsite-nav-responsive-tabs-panel">
    
      



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  

  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a 
             href="https://developers.google.com/cloud-messaging/"
           
           class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  "
           
           data-category="Site-Wide Custom Events" data-label="Responsive Tab: Home">
          Home
        </a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                     devsite-nav-active gc-analytics-event"
              data-category="Site-Wide Custom Events" data-label="Responsive Tab: Guides"
              tabindex="0">
          Guides
        </span>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a 
             href="https://developers.google.com/cloud-messaging/http-server-ref?nav=true"
           
           class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  "
           
           data-category="Site-Wide Custom Events" data-label="Responsive Tab: Reference">
          Reference
        </a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a 
             href="https://developers.google.com/cloud-messaging/samples"
           
           class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  "
           
           data-category="Site-Wide Custom Events" data-label="Responsive Tab: Samples">
          Samples
        </a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a 
             href="https://developers.google.com/cloud-messaging/support"
           
           class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  "
           
           data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support">
          Support
        </a>
      

      

      

      
    </li>
  

  
    <li class="devsite-nav-item devsite-nav-item-heading">
      <a href="https://developers.google.com/products/"
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
         data-label="Responsive Tab: all_products"
         >
        All Products
      </a>
    </li>
  
  </ul>
</nav>


    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar">
      
      
    </nav>
  </div>
  
  
</nav>


        <div class="devsite-main-content clearfix">

        
        
          <div class="devsite-banner devsite-banner-announcement
                    
                      devsite-background devsite-background-google-red
                    ">
            <div class="devsite-banner-inner">
            As of April 10, 2018, Google has deprecated GCM. The GCM server and client APIs are deprecated and will be removed as soon as April 11, 2019. Migrate GCM apps to <a href="http://firebase.google.com/docs/cloud-messaging/">Firebase Cloud Messaging</a> (FCM), which inherits the reliable and scalable GCM infrastructure, plus many new features. See the  <a href="https://developers.google.com/cloud-messaging/android/android-migrate-fcm">migration guide</a> to learn more.
            </div>
          </div>
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent">
    <ul class="devsite-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/gcm" class="devsite-nav-title">Overview</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/concept-options" class="devsite-nav-title">Messaging Concepts and Options</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/faq" class="devsite-nav-title">GCM and FCM FAQ</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Client Migration Guides, click to expand/collapse" role="link">Client Migration Guides</span><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/android/android-migrate-fcm" class="devsite-nav-title">Android</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/ios/ios-migrate-fcm" class="devsite-nav-title">iOS</a></li></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="GCM Connection Server, click to expand/collapse" role="link">GCM Connection Server</span><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/server" class="devsite-nav-title">About GCM Connection Server</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/http" class="devsite-nav-title">HTTP Connection Server</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/ccs" class="devsite-nav-title">XMPP Connection Server</a></li></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="GCM Clients, click to expand/collapse" role="link">GCM Clients</span><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/registration" class="devsite-nav-title">Registering Client Apps</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/android/client" class="devsite-nav-title">Set up a Client App on Android</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/ios/client" class="devsite-nav-title">Set up a Client App on iOS</a></li><li class="devsite-nav-item devsite-nav-active"><a href="cloudMessaging.html" class="devsite-nav-title">Implement a Client App on Chrome</a></li></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="How-to Guides, click to expand/collapse" role="link">How-to Guides</span><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/downstream" class="devsite-nav-title">Send Downstream Messages</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/upstream" class="devsite-nav-title">Send Upstream Messages</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/topic-messaging" class="devsite-nav-title">Send Messages to Topics</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/notifications" class="devsite-nav-title">Send Messages to Device Groups</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/android/client-device-group" class="devsite-nav-title">Managing Device Groups on Android</a></li><li class="devsite-nav-item"><a href="https://developers.google.com/cloud-messaging/network-manager" class="devsite-nav-title">Implement GCM Network Manager for Android</a></li></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav"></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  


<div class="devsite-rating-container
            "><div class="devsite-rating-stars"><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons"
         data-rating-val="1" data-category="Site-Wide Custom Events" data-label="Star Rating 1"
         track-metadata-score="1" track-type="feedback" track-name="rating"
         track-metadata-position="header"
         role="button"
         
         aria-label="Site content star ratings, rating 1 out of 5"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons"
         data-rating-val="2" data-category="Site-Wide Custom Events" data-label="Star Rating 2"
         track-metadata-score="2" track-type="feedback" track-name="rating"
         track-metadata-position="header"
         role="button"
         
         aria-label="Site content star ratings, rating 2 out of 5"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons"
         data-rating-val="3" data-category="Site-Wide Custom Events" data-label="Star Rating 3"
         track-metadata-score="3" track-type="feedback" track-name="rating"
         track-metadata-position="header"
         role="button"
         
         aria-label="Site content star ratings, rating 3 out of 5"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons"
         data-rating-val="4" data-category="Site-Wide Custom Events" data-label="Star Rating 4"
         track-metadata-score="4" track-type="feedback" track-name="rating"
         track-metadata-position="header"
         role="button"
         
         aria-label="Site content star ratings, rating 4 out of 5"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons"
         data-rating-val="5" data-category="Site-Wide Custom Events" data-label="Star Rating 5"
         track-metadata-score="5" track-type="feedback" track-name="rating"
         track-metadata-position="header"
         role="button"
         
         aria-label="Site content star ratings, rating 5 out of 5"></div></div><div class="devsite-rating-description"></div><div class="devsite-rating-internal"><span class="devsite-rating-stats"></span></div></div><script>
  $(document).ready(function() {
    devsite.ratings.init(
      document.querySelectorAll('#devsite-feedback-project'), false
      
    );
  });
</script>


  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="https://developers.google.com/products/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="1">
    
    
      Products
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.com/cloud-messaging/" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="2">
    
    
      Cloud Messaging
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.com/cloud-messaging/gcm" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="3">
    
    
      Guides
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    Implementing GCM Client on Chrome
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"></nav>
  
  <div class="devsite-article-body clearfix
            "
       itemprop="articleBody">
    

<p>Google Cloud Messaging provides messaging services for Chrome in two ways:</p>
  <ul>
    <li><strong>Chrome apps and extensions</strong> can access the GCM service
      directly through <a href="https://developer.chrome.com/apps/gcm">chrome.gcm</a> API.</li>
    <li><strong>Websites in Chrome</strong> can
      implement <a href="https://developers.google.com/web/fundamentals/getting-started/push-notifications/?hl=en">push messaging</a>
      through service workers and web app manifests.</li>
    </ul>

  <p>The rest of this page describes the GCM support for <i>Chrome apps and
  extensions only</i>; for website support, see the
  <a href="https://developers.google.com/web/fundamentals/getting-started/push-notifications/?hl=en">
  push messaging codelab</a>.</p>

<p>For Chrome apps and extensions, GCM enables Chrome instances to send and receive message data from servers. The
<a href="https://developer.chrome.com/apps/gcm">chrome.gcm</a> API allows the Chrome apps or extensions to access
the GCM service. The service works even if an app
or extension isn't currently running. For example, calendar updates could be
pushed to users even when their calendar app isn't open. </p>

<p>To use both API and service, you must agree to the <a href="https://developers.google.com/terms/">Google APIs Terms of
Service</a> and <a href="https://developers.google.com/cloud/terms/">Google Cloud Platform Terms
of Service</a>.</p>


<p>A full GCM implementation requires both a client implementation and a server
implementation. For more
information about implementing the server side, see <a href="https://developers.google.com/cloud-messaging/server.html">
About GCM Connection Server</a>.</p>

<h2 id="project-setup">Create an API Project and credentials</h2>

<p>New GCM projects must generate required security credentials
  by creating an API project in the <a href="https://firebase.google.com/console/"
                                    class="link external gc-analytics-event"
                                    data-category="console"
                                    data-action="linkClick">Firebase console</a>.</p>

<ol>
  <li>In the <a href="https://firebase.google.com/console/"
                                    class="link external gc-analytics-event"
                                    data-category="console"
                                    data-action="linkClick">Firebase console</a>, select <strong>Create New Project</strong>.
  </li>

  <li>Supply a project name and click <strong>Create Project</strong>.</li>

  <li>Select the gear icon next to your project name at top left, and
    select <strong>Project Settings</strong>.</li>

  <li>Select the <strong>Cloud Messaging</strong> tab. You can find your Server
    key and sender ID in this page.</li>
</ol>

<h2 id="set_up_chrome_app_or_extension">Set up Chrome App or Extension</h2>

<h3 id="add_permission_to_manifest">Add permission to manifest</h3>

<p>To use the gcm service, you must declare the <code>gcm</code> permission in
<code>manifest.json</code>.</p>

<pre data-filename="manifest.json"><code>
"permissions": [
  "gcm", ... // Other permissions, like "storage"
]
</code></pre>

<p>Please note that running sample code below requires the <code>storage</code> permission as
well in order to persist some data via the <a href="https://developer.chrome.com/apps/storage">chrome.storage</a>
API.</p>

<h2 id="write_chrome_app_or_extension">Write Chrome App or Extension</h2>

<h3 id="obtain_gcm_registration_id">Obtain GCM registration token</h3>

<p>Your app or extension needs to register with GCM connection servers before it can receive
messages. This is achieved by calling <a href="https://developer.chrome.com/apps/gcm#method-register">chrome.gcm.register</a> and passing a list of
senders identified by project numbers from <a href="https://cloud.google.com/console/project">Google Developers
Console</a>. Your app or extension should
pass a callback function to verify if the registration succeeded or not, by
checking whether the error is set on <code>chrome.runtime.lastError</code> property. If the
registration is successful, an app or extension receives a registration token,
which should be sent back to your application server in a secure way, for
example, via https. Otherwise, your app or extension should handle the error
identified by <code>chrome.runtime.lastError</code> and retry later.</p>

<p>If your app or extension wishes to receive messages from the different senders,
it can call <a href="https://developer.chrome.com/apps/gcm#method-register">chrome.gcm.register</a> again with the new sender list and the new
registration token will be returned.</p>

<pre data-filename="background.js"><code>
function registerCallback(registrationId) {
  if (chrome.runtime.lastError) {
    // When the registration fails, handle the error and retry the
    // registration later.
    return;
  }

  // Send the registration token to your application server.
  sendRegistrationId(function(succeed) {
    // Once the registration token is received by your server,
    // set the flag such that register will not be invoked
    // next time when the app starts up.
    if (succeed)
      chrome.storage.local.set({registered: true});
  });
}

function sendRegistrationId(callback) {
  // Send the registration token to your application server
  // in a secure way.
}

chrome.runtime.onStartup.addListener(function() {
  chrome.storage.local.get("registered", function(result) {
    // If already registered, bail out.
    if (result["registered"])
      return;

    // Up to 100 senders are allowed.
    var senderIds = ["Your-Sender-ID"];
    chrome.gcm.register(senderIds, registerCallback);
  });
});
</code></pre>

<p>If your app or extension is installed in different profiles and/or in different
Chrome instances, each of them will receive a different registration token.</p>

<p>Your app or extension could call <a href="https://developer.chrome.com/apps/gcm#method-unregister">gcm.unregister</a> to revoke the registration token.
The unregistration should only be done in rare cases, such as if your app or
extension does not want to receive further messages, or the registration token is
suspected to be compromised.</p>

<pre data-filename="background.js"><code>
function unregisterCallback() {
  if (chrome.runtime.lastError) {
    // When the unregistration fails, handle the error and retry
    // the unregistration later.
    return;
  }
}

chrome.gcm.unregister(unregisterCallback);
</code></pre>

<p>Your app or extension is automatically unregistered from the GCM service when a
user uninstalls it.</p>

<h3 id="receive_messages">Receive downstream messages</h3>

<p>When your server wants to send a message to the user, it needs to connect to a
GCM connection server in one of two ways as described in
<a href="https://developers.google.com/cloud-messaging/server.html">About GCM Connection Server</a>.
 The message specifies all of the registration tokens that are related to
that user. When the GCM connection server receives the message, it routes the message to
all instances of Chrome running apps or extensions with one of the registration
IDs. If your app or extension has been installed in more than one profiles in a
single Chrome instance, all of them can receive messages independently based on
their unique registration tokens.</p>

<p>Messages from the server are delivered via the <a href="https://developer.chrome.com/apps/gcm#event-onMessage">chrome.gcm.onMessage</a> event. Your app
or extension must register a handler to receive this event.</p>

<pre data-filename="background.js"><code>
chrome.gcm.onMessage.addListener(function(message) {
  // A message is an object with a data property that
  // consists of key-value pairs.
});
</code></pre>

<p>As long as Chrome is running, even if the extension or app is not running, it is
woken up to deliver a message.</p>

<h3 id="send_messages">Send upstream messages</h3>

<p>In addition to delivering push messages from your server to the client, the GCM
supports sending upstream messages from the client to your server. Your server
should be set up to connect to GCM Cloud Connection Server as described in the
<a href="https://developers.google.com/cloud-messaging/ccs.html">Implementing an XMPP Connection
Server</a> document.</p>

<p>To send messages upstream, your app or extension should call <a href="https://developer.chrome.com/apps/gcm#method-send">chrome.gcm.send</a> with an
object containing:</p>

<ul>
<li>Message ID that identifies the message when it fails to be queued or
delivered. The message ID can be any kind of string. However, it is
recommended to stay unique across the lifetime of your app or extension, even
after it restarts. If you use the same message ID, there may be a chance that
the previous message gets overridden. If an auto-increment counter is used to
create the message ID, your app or extension should persist the counter value
via <a href="extensions/storage.html">chrome.storage</a> API and restore it when the app
reloads.</li>
<li>Destination ID that identifies the server. This is the Sender ID plus the
suffix <code>@gcm.googleapis.com</code>.</li>
<li>Data that consist of a list of string-to-string key value pairs (up to 4KB
total).</li>
<li>Time-to-live (TTL, optional). This property value must be a duration from 0 to
86,400 seconds (1 day) and it corresponds to the maximum period of time for
which GCM will store and try to deliver the message. If this property is not
set, it is default to the maximum value. When a TTL is set to 0, GCM will try
to deliver the message immediately. If the immediate effort fails, the message
will be discarded.</li>
</ul>

<p>When the callback passed in <a href="https://developer.chrome.com/apps/gcm#method-send">chrome.gcm.send</a> is called without runtime error, it does
not mean that the message was already delivered to the GCM connection server. Rather, it
means that it was queued for delivery. Your app or extension should check and
handle <code>chrome.runtime.lastError</code>. Please refer to <a href="cloudMessaging.html#error_reference">Error
reference</a> for possible error codes that could be
returned.</p>

<p>If the message fails to reach the destination within the specified TTL period,
for example due to network error, the <a href="https://developer.chrome.com/apps/gcm#event-onSendError">chrome.gcm.onSendError</a> will be fired. Your app
or extension can listen to this event and react to it, e.g. by trying to resend
the message. Please refer to <a href="cloudMessaging.html#error_reference">Error reference</a> for
possible error codes that could be returned.</p>

<pre data-filename="background.js"><code>
// Substitute your own sender ID here.
var senderId = "Your-Sender-ID";

// Make the message ID unique across the lifetime of your app.
// One way to achieve this is to use the auto-increment counter
// that is persisted to local storage.

// Message ID is saved to and restored from local storage.
var messageId = 0;
chrome.storage.local.get("messageId", function(result) {
  if (chrome.runtime.lastError)
    return;
  messageId = parseInt(result["messageId"]);
  if (isNaN(messageId))
    messageId = 0;
});

// Sets up an event listener for send error.
chrome.gcm.onSendError.addListener(sendError);

// Returns a new ID to identify the message.
function getMessageId() {
  messageId++;
  chrome.storage.local.set({messageId: messageId});
  return messageId.toString();
}

function sendMessage() {
  var message = {
    messageId: getMessageId(),
    destinationId: senderId + "@gcm.googleapis.com",
    timeToLive: 86400,    // 1 day
    data: {
      "key1": "value1",
      "key2": "value2"
    }
  };
  chrome.gcm.send(message, function(messageId) {
    if (chrome.runtime.lastError) {
      // Some error occurred. Fail gracefully or try to send
      // again.
      return;
    }

    // The message has been accepted for delivery. If the message
    // can not reach the destination, onSendError event will be
    // fired.
  });
}

function sendError(error) {
  console.log("Message " + error.messageId +
      " failed to be sent: " + error.errorMessage);
}
</code></pre>

<h2 id="advanced_topics">Advanced Topics</h2>

<h3 id="messages_deleted_event">Messages deleted event</h3>

<p>GCM will store up to 100 non-collapsible messages that are sent from your server
to your client. After that, all messages are discarded from GCM, and an event
<a href="https://developer.chrome.com/apps/gcm#event-onMessagesDeleted">chrome.gcm.onMessagesDeleted</a> will be fired, which tells the client that it falls
behind. Your app or extension should respond by syncing with your application
server to recover the discarded messages.</p>

<pre data-filename="background.js"><code>
chrome.gcm.onMessagesDeleted.addListener(messagesDeleted);

function messagesDeleted() {
  // All messages have been discarded from GCM. Sync with
  // your application server to recover from the situation.
}
</code></pre>

<h3 id="collapsible_messages">Collapsible messages</h3>

<p>GCM messages are often a tickle, telling the app or extension to contact the
server for fresh data. In GCM, it's possible to create collapsible messages for
this situation, wherein new messages replace older ones. When a collapse key is
provided and multiple messages are queued up in the GCM connection servers for the same
user, only the last one with any given collapse key is delivered to your app or
extension. As a result the <code>message</code> object passed to the <a href="https://developer.chrome.com/apps/gcm#event-onMessage">chrome.gcm.onMessage</a> event
will contain a <code>collapseKey</code>field.</p>


<h2 id="error_reference">Error reference</h2>

<p>An error could occur when a gcm API function is called. Your app or extension
should check <code>chrome.runtime.lastError</code> for more information in your callback.
The error code will also be passed as a parameter to <a href="https://developer.chrome.com/apps/gcm#event-onSendError">chrome.gcm.onSendError</a> event.</p>

<p>Here's a brief summary of the gcm errors:</p>

<ul>
<li><strong>Function was called with invalid parameters</strong>: this could happen when gcm
functions are called with bad parameters.</li>
<li><strong>Asynchronous operation is pending</strong>: this could happen when certain gcm
function is called again without waiting for the callback passed in previous
function to be called.</li>
<li><strong>Network error occurred</strong>: this could happen when GCM connection server fails to reach
due to network problem, like losing Internet connection.</li>
<li><strong>Server error occurred</strong>: this could happen when GCM connection server fails to reach
due to server problem, like server busy.</li>
<li><strong>Time-to-live exceeded</strong>: this could happen when a message could not be
delivered within the specific time-to-live period.</li>
<li><strong>Unknown error occurred</strong>: this could happen due to any other internal
errors.</li>
</ul>






	
  </div>
  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.com/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished"
       content="2016-09-01T18:52:55.967850">
      
      Last updated September 1, 2016.
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-promos nocontent"><nav class="devsite-full-site-width"><ul class="devsite-footer-promos-list"><li class="devsite-footer-promo"><a href="https://www.youtube.com/playlist?list=PLOU2XLYxmsIIiaVcbQ9_rbI9IzF2agybt"
           class="devsite-footer-promo-title gc-analytics-event"
           data-category="Site-Wide Custom Events"
           data-label="Content Page Footer Promo"
           ><img class="devsite-footer-promo-icon" src="https://www.gstatic.com/images/icons/material/product/2x/youtube_64dp.png">
          
          
            YouTube
          
        </a><div class="devsite-footer-promo-description">Check out GCM videos on YouTube</div></li><li class="devsite-footer-promo"><a href="https://github.com/googlesamples/google-services"
           class="devsite-footer-promo-title gc-analytics-event"
           data-category="Site-Wide Custom Events"
           data-label="Content Page Footer Promo"
           ><img class="devsite-footer-promo-icon" src="https://developers.google.com/site-assets/logo-github.svg">
          
          
            GitHub
          
        </a><div class="devsite-footer-promo-description">Explore our sample apps or fork them to build your own</div></li><li class="devsite-footer-promo"><a href="http://stackoverflow.com/questions/tagged/google-cloud-messaging"
           class="devsite-footer-promo-title gc-analytics-event"
           data-category="Site-Wide Custom Events"
           data-label="Content Page Footer Promo"
           ><img class="devsite-footer-promo-icon" src="https://developers.google.com/site-assets/logo-stack-overflow.svg">
          
          
            Stack Overflow
          
        </a><div class="devsite-footer-promo-description">Ask questions with the google-cloud-messaging tag</div></li></ul></nav></footer><footer class="devsite-footer-linkboxes nocontent
               devsite-footer-linkboxes-all-backup
               devsite-footer-linkboxes-with-sites"><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Connect</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://googledevelopers.blogspot.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Blog Link"
               >
                Blog
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://www.facebook.com/Google-Developers-967415219957038/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Facebook Link"
               >
                Facebook
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://medium.com/google-developers"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Medium Link"
               >
                Medium
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://twitter.com/googledevs"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Twitter Link"
               >
                Twitter
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://www.youtube.com/user/GoogleDevelopers"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer YouTube Link"
               >
                YouTube
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Programs</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://www.womentechmakers.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Women Techmakers"
               >
                Women Techmakers
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/agency/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Agency"
               >
                Agency Program
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/groups/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Groups"
               >
                GDG
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/experts/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Experts"
               >
                Google Developers Experts
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/startups/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Startups"
               >
                Startup Launchpad
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://userresearch.google.com/?reserved=0&amp;utm_source=developers.google.com&amp;Q_Language=en&amp;utm_medium=own_srch&amp;utm_campaign=Global-developers&amp;utm_term=0&amp;utm_content=0&amp;productTag=clou&amp;campaignDate=nov18&amp;pType=devel&amp;referral_code=js564523"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer User Studies"
               >
                User Studies
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Developer Consoles</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://console.developers.google.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Developers Console"
               >
                Google API Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.cloud.google.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Cloud Platform Console"
               >
                Google Cloud Platform Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://play.google.com/apps/publish/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Google Play Console"
               >
                Google Play Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.firebase.google.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Console"
               >
                Firebase Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.actions.google.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Actions on Google Console"
               >
                Actions on Google Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cast.google.com/publish/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cast SDK Developer Console"
               >
                Cast SDK Developer Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://chrome.google.com/webstore/developer/dashboard"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Web Store Developer Dashboard"
               >
                Chrome Web Store Dashboard
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.com/"
           class="gc-analytics-event devsite-footer-linkbox-logo-link"
           data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo"
               src="https://developers.google.com/_static/5b213a6cb2/images/redesign-14/lockup-color-knockout.png"
               alt="Google Developers"></a><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://developer.android.com/index.html"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Android Link"
               >
                Android
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developer.chrome.com/home"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Chrome Link"
               >
                Chrome
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://firebase.google.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Firebase Link"
               >
                Firebase
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Cloud Link"
               >
                Google Cloud Platform
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/products/"
               class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Products Link"
               >
                All Products
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="https://developers.google.com/i18n/setlang/"
            method="post"><input type="hidden" name="xsrf_token" value="JjUH1PEmVyIbQiJ_MWmLoKONjmRFGOzzSlTfCJOg8Ys6MTU1MzY2MzA0NDc1MTQyMw" /><input type="hidden" name="next" value="/cloud-messaging/chrome/client"><select class="devsite-utility-footer-language-select kd-select" name="language"
                track-type="languageSelector" track-name="click"><option value="id"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="id"
                track-metadata-original-language="en"
                track-metadata-selected-language="id">
            Bahasa Indonesia
          </option><option value="de"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="de"
                track-metadata-original-language="en"
                track-metadata-selected-language="de">
            Deutsch
          </option><option value="en"
                 selected="selected" 
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="en"
                track-metadata-original-language="en"
                track-metadata-selected-language="en">
            English
          </option><option value="es"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="es"
                track-metadata-original-language="en"
                track-metadata-selected-language="es">
            español
          </option><option value="fr"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="fr"
                track-metadata-original-language="en"
                track-metadata-selected-language="fr">
            français
          </option><option value="pt-br"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="pt-br"
                track-metadata-original-language="en"
                track-metadata-selected-language="pt-br">
            Português Brasileiro
          </option><option value="ru"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="ru"
                track-metadata-original-language="en"
                track-metadata-selected-language="ru">
            Русский
          </option><option value="ja"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="ja"
                track-metadata-original-language="en"
                track-metadata-selected-language="ja">
            日本語
          </option><option value="zh-cn"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="zh-cn"
                track-metadata-original-language="en"
                track-metadata-selected-language="zh-cn">
            简体中文
          </option><option value="ko"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-eventDetail="ko"
                track-metadata-original-language="en"
                track-metadata-selected-language="ko">
            한국어
          </option></select></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event"
           href="https://developers.google.com/terms/site-terms"
           data-category="Site-Wide Custom Events"
           data-label="Footer terms link"
           data-footer-link-id="terms"
           >Terms
         </a><a class="devsite-utility-footer-link gc-analytics-event"
           href="https://policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer privacy link"
           data-footer-link-id="privacy"
           >Privacy
         </a></span></div><div class="devsite-utility-footer-nav-right"><div class="devsite-utility-footer-newsletter-signup-text">
        Sign up for the Google Developers newsletter
      </div><a class="button button-primary devsite-utility-footer-newsletter-signup-button"
         href="https://services.google.com/fb/forms/googledevelopersnewsletter/?utm_medium=referral&amp;utm_source=google-products&amp;utm_team=googledevs&amp;utm_campaign=201611-newsletter-launch"
         track-type="navigateTo" track-name="newsletter"
         track-metadata-eventDetail="footer"
         track-metadata-position="footer">
        
        Subscribe
      </a></div></nav></footer><div class="devsite-feedback-dialog devsite-dialog"><div class="devsite-dialog-contents"><h3>Send feedback about...</h3><div class="devsite-feedback-item"><a data-type="documentation" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Docs Feedback Image"
           track-type="feedback" track-name="feedbackDocIcon" track-metadata-position="header"><div class="devsite-feedback-item-icon-container"><div class="devsite-feedback-item-icon-white devsite-feedback-item-icon-docs
                        material-icons"></div></div></a><div class="devsite-feedback-item-name">
          
          This page
        </div><div class="devsite-feedback-item-description"><a data-type="documentation" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Docs Feedback Text"
             track-type="feedback" track-name="feedbackDocText" track-metadata-position="header">
            
            Documentation feedback
          </a></div></div><div class="devsite-feedback-item"><a data-type="product" tabindex="0" class="gc-analytics-event"
           data-category="Site-Wide Custom Events" data-label="Product Feedback Image"
           track-type="feedback" track-name="feedbackProductIcon" track-metadata-position="header"
         ><img src="https://developers.google.com/cloud-messaging/images/gcm_logo.svg"
                 class="devsite-feedback-item-icon"
                 alt="Cloud Messaging"></a><div class="devsite-feedback-item-name">
        Cloud Messaging
        </div><div class="devsite-feedback-item-description"><a data-type="product" tabindex="0" class="gc-analytics-event"
             data-category="Site-Wide Custom Events" data-label="Product Feedback Text"
             track-type="feedback" track-name="feedbackProductText" track-metadata-position="header"
           >
            
            Product feedback
          </a></div></div></div><div class="devsite-dialog-buttons"><button type="button" class="devsite-feedback-cancel button-white gc-analytics-event"
              data-category="Site-Wide Custom Events" data-label="Cancel Feedback Button"
              track-type="feedback" track-name="cancelFeedbackButton"
              track-metadata-position="header">
        
        Cancel
      </button></div></div><script>
  $(document).ready(function() {
    new devsite.feedback.Widget({
        'product_id': '412841',
        'bucket': '',
        'context': '',
        'version': 'devsite-20190319-r10-rc00.default'
      },
      document.querySelectorAll('.devsite-feedback-button'),
      'en',
      document.querySelector('.devsite-site-mask'),
      document.querySelector('.devsite-feedback-dialog'),
      document.querySelector('.devsite-feedback-cancel'),
      document.querySelectorAll('.devsite-feedback-item a:not([href])')
    );
  });
  </script></div><script async defer src="https://www.gstatic.com/feedback/api.js"></script><script src="https://developers.google.com/_static2/5b213a6cb2/jsi18n/"></script><script src="https://developers.google.com/_static/5b213a6cb2/js/script_foot_closure.js"></script><script src="https://developers.google.com/_static/5b213a6cb2/js/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 0, 'SITE_NAME': 'devsite', 'FULL_SITE_SEARCH_ENABLED': 1, 'ENABLE_CLOUDTRACK': 0, 'VTAGS_ENABLED': 0, 'HISTORY_ENABLED': 1, 'SIDEBAR_MINI_ENABLED': 0, 'VERSION_HASH': '5b213a6cb2', 'SCRIPTSAFE_DOMAIN': 'google-developers.appspot.com', 'ENABLE_BLOCKED_LINK_TOOLTIP': 0, 'ALLOWED_HOSTS': ['.android.com', '.appspot.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 0},
                               '[]','en',
                               true, '',
                               {"99a6bd77935176c43993ac6fe3e23dfc": true, "8de7a048f21618359bd37f5ce44be073": false, "098dafe57affddc137df300142652cfd": false, "8e03e230de0bd8a6fe173fdf172e8b3f": true, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true}, '/cloud-messaging/',
                               'https://developers.google.com/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script></div><span id="devsite-request-elapsed" data-request-elapsed="168.840169907"></span></body></html>
